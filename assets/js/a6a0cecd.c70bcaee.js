"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[428],{3675:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"commands/test","title":"Test \ud83e\uddea","description":"Run tests in a Dart or Flutter project with very_good test.","source":"@site/docs/commands/test.md","sourceDirName":"commands","slug":"/commands/test","permalink":"/docs/commands/test","draft":false,"unlisted":false,"editUrl":"https://github.com/verygoodopensource/very_good_cli/tree/main/site/docs/commands/test.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Commands","permalink":"/docs/category/commands"},"next":{"title":"Get Packages \ud83d\udce6","permalink":"/docs/commands/get_pkgs"}}');var o=s(4848),r=s(8453);const i={sidebar_position:1},l="Test \ud83e\uddea",a={},d=[{value:"Usage",id:"usage",level:2},{value:"Passing Flutter specific arguments",id:"passing-flutter-specific-arguments",level:3},{value:"Tests without pub install",id:"tests-without-pub-install",level:3},{value:"Golden tests",id:"golden-tests",level:3}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"test-",children:"Test \ud83e\uddea"})}),"\n",(0,o.jsxs)(t.p,{children:["Run tests in a Dart or Flutter project with ",(0,o.jsx)(t.code,{children:"very_good test"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["By default, this command will optimize your tests to run more efficiently by grouping them into a single entrypoint (see ",(0,o.jsx)(t.a,{href:"https://github.com/flutter/flutter/issues/90225",children:"this issue"}),")."]}),"\n",(0,o.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-sh",children:'very_good test [arguments]\n-h, --help                            Print this usage information.\n    --coverage                        Whether to collect coverage information.\n-r, --recursive                       Run tests recursively for all nested packages.\n    --[no-]optimization               Whether to apply optimizations for test performance.\n                                      (defaults to on)\n-j, --concurrency                     The number of concurrent test suites run.\n                                      (defaults to "4")\n-t, --tags                            Run only tests associated with the specified tags.\n    --exclude-coverage                A glob which will be used to exclude files that match from the coverage.\n-x, --exclude-tags                    Run only tests that do not have the specified tags.\n    --min-coverage                    Whether to enforce a minimum coverage percentage.\n    --test-randomize-ordering-seed    The seed to randomize the execution order of test cases within test files.\n    --update-goldens                  Whether "matchesGoldenFile()" calls within your test methods should update the golden files.\n    --force-ansi                      Whether to force ansi output. If not specified, it will maintain the default behavior based on stdout and stderr.\n    --dart-define=<foo=bar>           Additional key-value pairs that will be available as constants from the String.fromEnvironment, bool.fromEnvironment, int.fromEnvironment, and double.fromEnvironment constructors. Multiple defines can be passed by repeating "--dart-define" multiple times.\n\nRun "very_good help" to see global options.\n'})}),"\n",(0,o.jsxs)(t.admonition,{type:"tip",children:[(0,o.jsxs)(t.p,{children:["For ",(0,o.jsx)(t.strong,{children:"Dart"})," projects, use ",(0,o.jsx)(t.strong,{children:(0,o.jsx)(t.code,{children:"very_good dart test"})})," instead."]}),(0,o.jsx)(t.p,{children:"All test parameters and options work identically with this command."})]}),"\n",(0,o.jsx)(t.h3,{id:"passing-flutter-specific-arguments",children:"Passing Flutter specific arguments"}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"dart test"})," and ",(0,o.jsx)(t.code,{children:"flutter test"})," commands expose more arguments than those available through ",(0,o.jsx)(t.code,{children:"very_good dart test"})," or ",(0,o.jsx)(t.code,{children:"very_good test"}),". However, you can use the argument terminator ",(0,o.jsx)(t.code,{children:"--"})," to pass additional arguments directly to the underlying test commands. Any arguments after ",(0,o.jsx)(t.code,{children:"--"})," will be forwarded to ",(0,o.jsx)(t.code,{children:"dart test"})," or ",(0,o.jsx)(t.code,{children:"flutter test"}),", making all their options available."]}),"\n",(0,o.jsxs)(t.p,{children:["For example, if you wish to run ",(0,o.jsx)(t.code,{children:"flutter test --no-track-widget-creation"})," you can simply use ",(0,o.jsx)(t.code,{children:"very_good test -- --no-track-widget-creation"}),"."]}),"\n",(0,o.jsx)(t.h3,{id:"tests-without-pub-install",children:"Tests without pub install"}),"\n",(0,o.jsxs)(t.p,{children:["Unlike ",(0,o.jsx)(t.code,{children:"dart test"})," or ",(0,o.jsx)(t.code,{children:"flutter test"}),", ",(0,o.jsx)(t.code,{children:"very_good test"})," will always run your tests without installing the projects dependencies (i.e. ",(0,o.jsx)(t.code,{children:"--no-pub"})," flag)."]}),"\n",(0,o.jsx)(t.p,{children:"This is an optimization done by the CLI because dependency installation is usually run once after cloning the repository. Conversely, running tests locally is usually done many times and it's often unnecessary to re-install dependencies prior to each test run."}),"\n",(0,o.jsxs)(t.p,{children:["If you need to install dependencies before running the tests with ",(0,o.jsx)(t.code,{children:"very_good_cli"}),", be sure to run ",(0,o.jsx)(t.code,{children:"very_good packages get"})," first."]}),"\n",(0,o.jsx)(t.h3,{id:"golden-tests",children:"Golden tests"}),"\n",(0,o.jsxs)(t.p,{children:['Golden tests are tests that compare the output of a test to a "golden" file. If the output of the test does not match the golden file, the test will fail. These usually invoke the ',(0,o.jsx)(t.a,{href:"https://api.flutter.dev/flutter/flutter_test/matchesGoldenFile.html",children:(0,o.jsx)(t.code,{children:"matchesGoldenFile"})})," matcher, which supports specifying a ",(0,o.jsx)(t.a,{href:"https://api.flutter.dev/flutter/flutter_test/GoldenFileComparator-class.html",children:(0,o.jsx)(t.code,{children:"GoldenFileComparator"})})," to customize the comparison by setting the top-level property ",(0,o.jsx)(t.a,{href:"https://api.flutter.dev/flutter/flutter_test/goldenFileComparator.html",children:(0,o.jsx)(t.code,{children:"goldenFileComparator"})}),", for example to accept a certain amount of difference."]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.a,{href:"https://cli.vgv.dev/",children:"Very Good CLI"})," supports golden tests out of the box, with and without a custom ",(0,o.jsx)(t.a,{href:"https://api.flutter.dev/flutter/flutter_test/goldenFileComparator.html",children:(0,o.jsx)(t.code,{children:"goldenFileComparator"})}),". This means that ",(0,o.jsx)(t.strong,{children:"no change is required"})," to your test code to run them with ",(0,o.jsx)(t.code,{children:"very_good test"}),"."]}),"\n",(0,o.jsx)(t.admonition,{type:"info",children:(0,o.jsxs)(t.mdxAdmonitionTitle,{children:["For an example on specifying a custom ",(0,o.jsx)(t.a,{href:"https://api.flutter.dev/flutter/flutter_test/GoldenFileComparator-class.html",children:(0,o.jsx)(t.code,{children:"GoldenFileComparator"})})," that accepts a certain amount of difference (toleration threshold), refer to the ",(0,o.jsxs)(t.a,{href:"https://api.flutter.dev/flutter/flutter_test/goldenFileComparator.html",children:[(0,o.jsx)(t.code,{children:"goldenFileComparator"})," Flutter documentation"]}),". :::"]})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>l});var n=s(6540);const o={},r=n.createContext(o);function i(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);